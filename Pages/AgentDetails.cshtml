@page "{id}"
@model RealEstatePipeline.Pages.AgentDetailsModel
@{
}


<h2>Agent Details</h2>

<!-- Display agent details -->
<p>Name: @Model.Agent.UserName</p>
<p>Email: @Model.Agent.Email</p>
<p>Bio: @Model.Agent.ProfileDescription</p>
<h3>Ratings</h3>
@if (Model.AgentRatings != null && Model.AgentRatings.Any())
{
    <ul>
        @foreach (var rating in Model.AgentRatings)
        {
            <li>
                Rating: @rating.Rating - Comment: @rating.Comments - Date: @rating.RatingDate.ToString("yyyy-MM-dd")
            </li>
        }
    </ul>
}
else
{
    <p>No ratings available for this agent.</p>
}
<!-- Add more details as needed -->
@if (User.IsInRole("Client"))
{
    <form method="post" asp-page-handler="RateAgent">
        <input type="hidden" asp-for="AgentId" />
        <label for="newRating">Rating (1-5):</label>
        <select id="newRating" asp-for="NewRating">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <!-- Add options for 2, 3, 4, 5 -->
        </select>
        <label for="newComment">Comments:</label>
        <textarea id="newComment" asp-for="NewComment"></textarea>
        <input type="submit" value="Rate Agent" />
    </form>
}